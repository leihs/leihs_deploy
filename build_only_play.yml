# NOTE: instead of 'hosts: localhost' we need to use 'hosts: all' + 'delegate_to: localhost' so it works when using the `--limit $HOST` argument!
- hosts: all
  tasks:
    - name: Build Admin
      delegate_to: localhost
      import_role:
        name: leihs-admin-install
        tasks_from: build.yml

    - name: Build Borrow
      delegate_to: localhost
      import_role:
        name: leihs-borrow-install
        tasks_from: build.yml

    - name: Build Mail
      delegate_to: localhost
      import_role:
        name: leihs-mail-install
        tasks_from: build.yml

    - name: Build My
      delegate_to: localhost
      import_role:
        name: leihs-my-install
        tasks_from: build.yml

    - name: Build Procure
      delegate_to: localhost
      import_role:
        name: leihs-procure-install
        tasks_from: build.yml

    - debug:
        msg: "All local builds OK!"
